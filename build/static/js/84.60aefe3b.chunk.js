"use strict";(self.webpackChunkatlp_devpulse_fn=self.webpackChunkatlp_devpulse_fn||[]).push([[84],{1084:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var n=a(1413),r=a(885),l=a(2791),s=a(4165),o=a(5861),c=a(1429),p=a(7339),d=a(1044),i=a(5206),x=a(8687),u=(a(4666),a(1358)),m=a(3116),b=a(6809),f=a(2026),h=a(9546),y=a(1883),v=a(9126),g=a(8820),j=a(71),w=a(184),C=(0,x.$j)((function(e){var t=e.cycles;return{allCycles:t,errors:t.errors}}),{getAllCycles:function(){return function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var a,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.Z)({url:"http://localhost:4000/",method:"post",data:{query:"\n        query getCycle {\n          getAllApplicationCycles {\n            id\n            name\n            startDate\n            endDate\n          }\n        }\n      "}});case 3:return a=e.sent,e.next=6,a.data.data.getAllApplicationCycles;case 6:n=e.sent,t((0,c.Z)(p.qz,n)),e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(0),!e.t0){e.next=14;break}return e.abrupt("return",console.log(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},createCycle:function(e){var t=e.name,a=e.startDate,n=e.endDate;return function(){var e=(0,o.Z)((0,s.Z)().mark((function e(r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.Z)({url:"http://localhost:4000/",method:"post",data:{query:"\n        mutation createApplicationCycle($input: createApplicationCycle) {\n            createApplicationCycle(input: $input) {\n                id\n                name\n                startDate\n                endDate\n            }\n        }",variables:{input:{name:t,startDate:a,endDate:n}}}}).then((function(e){if(null!==e.data.data)i.Am.success("Cycle successfully created."),r((0,c.Z)(p.EX,e.data.data.createApplicationCycle));else{var t=e.data.errors[0].message;i.Am.error(t),r((0,c.Z)(p.ab,t))}})).catch((function(e){r((0,c.Z)(p.ab,e))}));case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",r((0,c.Z)(p.ab,e.t0)));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},updateApplicationCycle:function(e){var t=e.updateApplicationCycleId,a=e.name,n=e.startDate,r=e.endDate,l=e.id;return function(){var e=(0,o.Z)((0,s.Z)().mark((function e(o){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.Z)({url:"http://localhost:4000/",method:"post",data:{query:"\n          mutation upDateCycle(\n            $updateApplicationCycleId: ID!\n            $input: updateApplicationCycle\n            ) {\n            updateApplicationCycle(id: $updateApplicationCycleId, input: $input) {\n                id\n                name\n                startDate\n                endDate\n                }\n            }",variables:{updateApplicationCycleId:t,input:{name:a,startDate:n,endDate:r,id:l}}}}).then((function(e){if(null!==e.data.data)i.Am.success("Cycle successfully updated."),o((0,c.Z)(p.$l,e.data.data.updateApplicationCycle));else{var t=e.data.errors[0].message;i.Am.error(t),o((0,c.Z)(p.bs,t))}})).catch((function(e){o((0,c.Z)(p.bs,e))}));case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),!e.t0){e.next=9;break}return e.abrupt("return",console.log(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},deleteApplicationCycle:function(e){var t=e.deleteApplicationCycleId;return function(){var e=(0,o.Z)((0,s.Z)().mark((function e(a){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.Z)({url:"http://localhost:4000/",method:"post",data:{query:"\n            mutation deleteCycle($deleteApplicationCycleId: ID!) {\n            deleteApplicationCycle(id: $deleteApplicationCycleId) {\n                id\n                name\n             }\n            }",variables:{deleteApplicationCycleId:t}}}).then((function(e){if(null!==e.data.data&&(i.Am.success("Cycle successfully deleted."),a((0,c.Z)(p.fF,e.data.data.deleteApplicationCycle))),null==e.data.data){var t=e.data.errors[0].message;i.Am.success(t),a((0,c.Z)(p.wc,t))}})).catch((function(e){a((0,c.Z)(p.wc,e))}));case 3:e.sent,e.next=10;break;case 6:if(e.prev=6,e.t0=e.catch(0),!e.t0){e.next=10;break}return e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.allCycles,a=(e.errors,t.data);(0,l.useEffect)((function(){e.getAllCycles()}),[]);var s=(0,l.useState)(null),o=(0,r.Z)(s,2),c=o[0],p=o[1],d=Boolean(c),i=(0,l.useState)(""),x=(0,r.Z)(i,2),C=x[0],Z=x[1],N=(0,l.useState)(""),k=(0,r.Z)(N,2),A=k[0],D=k[1],S=(0,l.useState)(""),E=(0,r.Z)(S,2),P=E[0],I=E[1],$=(0,l.useState)(""),B=(0,r.Z)($,2),T=B[0],F=B[1],H=(0,l.useState)(""),q=(0,r.Z)(H,2),z=q[0],_=q[1],G=(0,l.useState)(""),L=(0,r.Z)(G,2),M=L[0],O=L[1],Q=(0,l.useState)(""),R=(0,r.Z)(Q,2),K=R[0],U=R[1],X=(0,l.useState)(!1),J=(0,r.Z)(X,2),V=J[0],W=J[1],Y=(0,l.useState)(!1),ee=(0,r.Z)(Y,2),te=ee[0],ae=ee[1],ne=(0,l.useState)(!1),re=(0,r.Z)(ne,2),le=re[0],se=re[1],oe=(0,l.useState)(void 0),ce=(0,r.Z)(oe,2),pe=ce[0],de=ce[1],ie=(0,l.useState)(""),xe=(0,r.Z)(ie,2),ue=xe[0],me=xe[1],be=function(e){e.preventDefault(),W(!1)},fe=function(){ae(!1)},he=function(){se(!1)};(0,l.useEffect)((function(){e.getAllCycles()}),[]);var ye=[{Header:"Name",accessor:"name"},{Header:"Starting date",accessor:"startDate"},{Header:"Closing date",accessor:"endDate"},{Header:" ",accessor:"",Cell:function(e){var t=e.row;return(0,w.jsx)("div",{children:(0,w.jsx)(v.FQA,{onClick:function(e){de(t.id),p(e.currentTarget)},style:{color:"#000",fontSize:"20px"}})})}}],ve=(0,l.useMemo)((function(){return ye}),[]),ge=(0,u.useTable)({columns:ve,data:a},u.usePagination),je=ge.getTableProps,we=ge.getTableBodyProps,Ce=ge.headerGroups,Ze=ge.page,Ne=ge.nextPage,ke=ge.previousPage,Ae=ge.canNextPage,De=ge.canPreviousPage,Se=ge.pageOptions,Ee=ge.gotoPage,Pe=ge.pageCount,Ie=(ge.setPageSize,ge.state),$e=ge.prepareRow,Be=Ie.pageIndex;Ie.pageSize;return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"flex bg-[#F9F9FB]",children:[(0,w.jsx)("div",{className:"md:hidden",children:(0,w.jsx)(m.Z,{})}),(0,w.jsx)("div",{className:"relative min-h-[50vh] w-[84rem] md:w-[100rem]",children:(0,w.jsxs)("div",{className:"absolute table table-fixed w-[100%] top-[20%] pb-10 md:relative px-[10%] md:px-[10px]",children:[(0,w.jsxs)("button",{className:"h-[40px] rounded-[5px] bg-[#173b3f] text-white flex items-center p-0 pl-[5px] pr-[10px] mb-[20px]",onClick:function(){ae(!0)},children:[(0,w.jsx)(v.B8K,{className:"mx-[5px]"}),(0,w.jsx)("span",{children:"Cycle"})]}),(0,w.jsxs)("div",{className:" w-[100%] min-h-[70vh] m-auto  bg-[#fff] p-[10px] shadow-md rounded-[10px] relative pb-[80px]  overflow-x-auto\tmd:w-[100%]",children:[(0,w.jsxs)("table",(0,n.Z)((0,n.Z)({},je()),{},{className:"border-collapse w-[100%] my-[10px] mx-auto rounded-[15px] whitespace-nowrap ",children:[(0,w.jsx)("thead",{className:"h-[50px]",children:Ce.map((function(e){return(0,w.jsx)("tr",(0,n.Z)((0,n.Z)({},e.getHeaderGroupProps()),{},{className:"border-solid border-[1px] border-white even:bg-[#eef1f1]",children:e.headers.map((function(e){return(0,w.jsx)("th",(0,n.Z)((0,n.Z)({},e.getHeaderProps),{},{className:"border-solid pl-[30px] h-[50px] text-left bg-[#eef1f1] first:rounded-tl-[10px] last:rounded-tr-[10px] last:pl-[0px] border-b-[2px] border-[rgb(168, 168, 168)]   last:pl-[0px] w-[150px] last:w-[20px]",children:e.render("Header")}))}))}))}))}),(0,w.jsx)("tbody",(0,n.Z)((0,n.Z)({},we()),{},{children:Ze.map((function(e){return $e(e),(0,l.createElement)("tr",(0,n.Z)((0,n.Z)({},e.getRowProps()),{},{key:e.original.id,className:"even:bg-[#eef1f1]"}),e.cells.map((function(e){return(0,w.jsx)("td",(0,n.Z)((0,n.Z)({},e.getCellProps()),{},{className:"pl-[30px] text-left max-w-[150px] overflow-x-auto p-[8px] last:w-[2px] last:pl-[0px]",children:e.render("Cell")}))})))}))}))]})),(0,w.jsx)("div",{className:"block mx-auto my-0 w-[100%] absolute bottom-0 overflow-x-auto",children:(0,w.jsxs)("div",{className:"w-[100%] flex items-center justify-center my-[30px]  mx-auto md:block md:mx-auto",children:[(0,w.jsxs)("span",{className:"flex items-center md:justify-center md:mt-[10px]",children:[" ",(0,w.jsx)("button",{className:"my-0 mx-[5px] px-[5px] py-0 text-[#333] h-[35px] border-solid border-[1px]  border-[#a8a8a8]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return Ee(0)},disabled:!De,children:(0,w.jsx)(g.xN8,{})}),(0,w.jsx)("button",{className:" border-solid border-[1px]  border-[#a8a8a8] py-0 px-[5px] text-[#333] rounded-tl-[5px] h-[35px] disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8] ",onClick:function(){return ke()},disabled:!De,children:(0,w.jsx)(g.CF5,{})}),(0,w.jsx)("span",{className:"flex flex-wrap md:hidden ",id:"pages",children:null===Se||void 0===Se?void 0:Se.map((function(e,t){return console.log("pageOption",e),(0,w.jsx)("div",{children:(0,w.jsx)("button",{className:"border-solid border-[1px] mx-[1px]  border-[#a8a8a8] w-[30px] h-[35px] active:bg-[#333] active:text-[#fff] ".concat(Be===t&&"bg-[#173b3fcd] text-[#fff]"),onClick:function(e){var t=e.target.innerText;Ee(t-1)},children:e+1})})}))}),(0,w.jsx)("button",{className:" border-solid border-[1px]  border-[#a8a8a8] py-0 px-[5px] text-[#333] rounded-tr-[5px] h-[35px]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return Ne()},disabled:!Ae,children:(0,w.jsx)(g.Td4,{})}),(0,w.jsx)("button",{className:"my-0 mx-[5px] px-[5px] py-0 text-[#333] h-[35px] border-solid border-[1px]  border-[#a8a8a8]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return Ee(Pe-1)},disabled:!Ae,children:(0,w.jsx)(g.yci,{})})]})," ",(0,w.jsxs)("span",{className:"mx-[10px] md:block md:text-center",children:["Page ",(0,w.jsx)("strong",{children:Be+1})," of",(0,w.jsx)("strong",{children:Se.length})]})]})})]})]})}),(0,w.jsxs)(h.Z,{id:"basic-menu",anchorEl:c,open:d,onClose:function(){p(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,w.jsxs)(y.Z,{onClick:function(e){!function(e){var t=a[pe];W(!0),F(t.name),_(t.startDate),O(t.endDate),U(t.id),p(null)}()},children:[(0,w.jsx)(v.Aac,{className:"mr-[5px]"}),"Edit"]}),(0,w.jsxs)(y.Z,{onClick:function(e){me(a[pe].id),se(!0),p(null)},children:[(0,w.jsx)(v.AuQ,{className:"mr-[5px]"}),"Delete"]})]}),(0,w.jsx)(f.Z,{open:te,onClose:fe,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,w.jsx)(b.Z,{className:"absolute w-[50%] top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] md:w-[90%]",children:(0,w.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault();var a={name:C,startDate:A,endDate:P};e.createCycle(a),ae(!1),setTimeout((function(){window.location.reload()}),3e3)},className:" relative w-[100%] rounded-[5px] h-[455px] m-auto p-[10px] pt-[5px] bg-[#f0f0f0] ",children:[(0,w.jsx)("h1",{className:"text-center font-bold text-[24px] m-[20px]",children:"Add new cycle"}),(0,w.jsx)(j.bjh,{className:"absolute top-[20px] right-[20px] text-[35px] cursor-pointer",onClick:fe}),(0,w.jsx)("hr",{style:{marginBottom:"40px"}}),(0,w.jsx)("input",{type:"text",name:"name",placeholder:"Cycle name",value:C,onChange:function(e){Z(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,w.jsx)("input",{type:"date",name:"start date",value:A,onChange:function(e){D(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,w.jsx)("input",{type:"date",name:"end date",value:P,onChange:function(e){I(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,w.jsx)("button",{type:"submit",className:"text-white border-[1px] border-[#a8a8a8] h-[40px] w-[100px] block rounded-[5px] my-[10px] mx-[auto] bg-[#173b3f]",children:"Save"})]})})}),(0,w.jsx)(f.Z,{open:le,onClose:he,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,w.jsx)(b.Z,{className:"absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] rounded-[5px] bg-[#f0f0f0]",children:(0,w.jsxs)("div",{className:"block w-[300px] h-[200px] bg-[#f0f0f0] rounded-[5px]",children:[(0,w.jsxs)("div",{className:"text-center",children:[(0,w.jsx)(g.ELj,{className:"w-[40px] my-[20px] mx-auto text-[40px]"}),(0,w.jsx)("p",{className:"w-[60%] m-auto font-bold",children:"Are you sure you want to delete this cycle?"})]}),(0,w.jsxs)("div",{className:"flex flex-wrap my-[20px] mx-0",children:[(0,w.jsx)("button",{className:"block text-white bg-[#940000] my-[10px] mx-auto rounded-[5px] w-[100px] h-[40px]",onClick:function(t){t.preventDefault();var a={deleteApplicationCycleId:ue};e.deleteApplicationCycle(a),se(!1),setTimeout((function(){window.location.reload()}),3e3)},children:"Delete"}),(0,w.jsx)("button",{className:"h-[40px] w-[100px] block rounded-[5px] my-[10px] mx-auto bg-[#ABB8C3] text-[#fff]",onClick:he,children:"Cancel"})]})]})})}),(0,w.jsx)(f.Z,{open:V,onClose:be,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,w.jsx)(b.Z,{className:"absolute w-[50%] top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] md:w-[90%]",children:(0,w.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault();var a={updateApplicationCycleId:K,name:T,startDate:z,endDate:M,id:K};e.updateApplicationCycle(a),W(!1)},className:"relative rounded-[5px] w-[100%] h-[455px] m-auto p-[10px] pt-[5px] bg-[#f0f0f0] ",children:[(0,w.jsx)("h1",{className:"text-center font-bold text-[24px] m-[20px]",children:"Update cycle"}),(0,w.jsx)(j.bjh,{style:{position:"absolute",top:"20px",right:"20px",fontSize:"35px",cursor:"pointer"},onClick:be}),(0,w.jsx)("hr",{style:{marginBottom:"40px"}}),(0,w.jsx)("input",{type:"text",name:"name",placeholder:"Cycle name",value:T,onChange:function(e){F(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,w.jsx)("input",{type:"date",name:"start date",value:z,onChange:function(e){_(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,w.jsx)("input",{type:"date",name:"end date",value:M,onChange:function(e){O(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,w.jsx)("div",{className:"flex flex-wrap w-[300px] m-auto",children:(0,w.jsx)("button",{className:"text-white border-[1px] border-[#a8a8a8] h-[40px] w-[100px] block rounded-[5px] my-[10px] mx-[auto] bg-[#173b3f]",type:"submit",children:"Save"})})]})})})]})})}))}}]);
//# sourceMappingURL=84.60aefe3b.chunk.js.map