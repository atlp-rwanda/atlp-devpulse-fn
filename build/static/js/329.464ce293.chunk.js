"use strict";(self.webpackChunkatlp_devpulse_fn=self.webpackChunkatlp_devpulse_fn||[]).push([[329],{2329:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var a=r(1413),s=r(2982),n=r(4165),o=r(5861),l=r(885),i=r(2791),d=r(1429),c=r(7339),p=r(1044),u=r(5985),x=r(1031),m=r(7059),f=r(8687),b=r(1358),h=r(9126),g=r(8820),v=r(4373),j=r(5987),w=r(184),y=["indeterminate"],N=(0,i.forwardRef)((function(e,t){var r=e.indeterminate,s=(0,j.Z)(e,y),n=(0,i.useRef)(),o=t||n;return(0,i.useEffect)((function(){o.current.indeterminate=r}),[o,r]),(0,w.jsx)("div",{children:(0,w.jsx)("input",(0,a.Z)((0,a.Z)({type:"checkbox",ref:o},s),{},{className:"w-[20px] h-[20px]"}))})})),E=r(9546),Z=r(1883),S=r(9889),T=(0,f.$j)((function(e){return{allTrainees:e.softDeletedTrainees,restore:e.restore}}),{getAllSoftDeletedTrainees:function(e){var t=e.page,r=e.itemsPerPage;return function(){var e=(0,o.Z)((0,n.Z)().mark((function e(a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.ZP)({url:{NODE_ENV:"production",PUBLIC_URL:"/atlp-rwanda/atlp-devpulse-f",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BACKEND_URL,method:"post",data:{query:"\n        query Query($input: pagination) {\n            allSoftDeletedTrainees(input: $input) {\n                lastName\n                firstName\n                _id\n                email\n            }\n        }\n      ",variables:{input:{page:t,itemsPerPage:r}}}}).then((function(e){if(null!==e.data.data)u.Am.success("Fetched all deleted trainees successfuly."),console.log(e.data.data.allSoftDeletedTrainees),a((0,d.Z)(c.RK,e.data.data.allSoftDeletedTrainees));else{var t=e.data.errors[0].message;u.Am.error(t),a((0,d.Z)(c.Tl,t))}})).catch((function(e){a((0,d.Z)(c.Tl,e))}));case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),!e.t0){e.next=9;break}return e.abrupt("return",console.log(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},restoretraine:function(e){return console.log(e),function(){var t=(0,o.Z)((0,n.Z)().mark((function t(r){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:m._.RESTORE_TRAINE_LOADING});try{x.Z.post("/",{query:"mutation SoftRecover($input: softRecover) {\n                            softRecover(input: $input) {\n                                    id\n                                    email\n                                 \n                                }\n                                }",variables:{input:{id:e}}},{headers:{"Content-Type":"application/json"}}).then((function(e){var t;(console.log(e),e.data.data&&r({type:m._.RESTORE_TRAINE_SUCCESS,message:e.data.data.softRecover.email}),u.Am.success("Trainee Restored successfuly."),e.data.errors)&&(e.data.errors.map((function(e){t=e.message})),u.Am.error(t),console.log(t),r({type:m._.RESTORE_TRAINE_FAIL,error:t}))})).catch((function(e){console.log(e),r({type:m._.RESTORE_TRAINE_FAIL,error:e.message})}))}catch(a){r({type:m._.RESTORE_TRAINE_FAIL,error:a.message})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){console.log(e);var t=e.allTrainees,r=e.restore,n=(0,i.useState)(1),o=(0,l.Z)(n,1)[0],d=(0,i.useState)(100),c=(0,l.Z)(d,1)[0],p=(0,i.useState)(null),u=(0,l.Z)(p,2),x=u[0],m=u[1],f=(0,i.useState)(""),j=(0,l.Z)(f,2),y=(j[0],j[1]),T=Boolean(x),R=(0,i.useState)(void 0),_=(0,l.Z)(R,2),P=_[0],C=_[1];(0,i.useEffect)((function(){var t={page:o,itemsPerPage:c};e.getAllSoftDeletedTrainees(t)}),[r]);var k=(0,i.useState)(""),A=(0,l.Z)(k,2),F=A[0],O=(A[1],t.data);console.log(F);var D=[{Header:"First name",accessor:"firstName"},{Header:"Last name",accessor:"lastName"},{Header:"Email",accessor:"email"},{Header:"Actions",accessor:"",Cell:function(e){var t=e.row;return(0,w.jsx)("div",{children:(0,w.jsx)(h.FQA,{onClick:function(e){C(t.id),m(e.currentTarget)},style:{color:"#000",fontSize:"20px"}})})}}],H=(0,i.useMemo)((function(){return D}),[]),I=(0,b.useTable)({columns:H,data:O},b.usePagination,b.useRowSelect,(function(e){e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return(0,w.jsx)(N,(0,a.Z)({},t()))},Cell:function(e){var t=e.row;return(0,w.jsx)(N,(0,a.Z)({},t.getToggleRowSelectedProps()))}}].concat((0,s.Z)(e))}))})),L=I.getTableProps,B=I.getTableBodyProps,K=I.headerGroups,$=I.page,U=I.nextPage,q=I.previousPage,z=I.canNextPage,G=I.canPreviousPage,Q=I.pageOptions,W=I.gotoPage,M=I.pageCount,V=(I.setPageSize,I.state),J=I.prepareRow,X=(I.rows,I.selectedFlatRows,V.pageIndex);V.pageSize;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"w-64 ",children:(0,w.jsx)(S.Z,{})}),(0,w.jsx)("div",{className:"flex bg-[#F9F9FB]",children:(0,w.jsx)("div",{className:"min-h-[50vh] w-[100%] block  md:w-[100rem] md:mt-0  pl-[16rem] pt-[80px] md:pl-0",children:(0,w.jsxs)("div",{className:" w-[100%] top-[20%] md:top-[10%] md:relative px-[10%] md:px-[10px]",children:[(0,w.jsxs)("div",{className:"flex justify-between align-center mb-5 relative md:block",children:[(0,w.jsx)("div",{className:"absolute bottom-0 right-0 md:relative md:mb-3",children:(0,w.jsx)("button",{className:"px-3 rounded-[5px] bg-[#173b3f] text-white flex items-center",children:"Empty trash"})}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"relative mb-2 w-[fit-content]",children:[(0,w.jsx)(v.yQg,{className:"h-[1.5rem] w-[1.5rem] absolute box-border top-[50%] right-[2px] translate-y-[-50%]"}),(0,w.jsx)("input",{type:"text",placeholder:"Sort by",className:"px-2 py-1 border border-[#999999] rounded-[5px]"})]}),(0,w.jsxs)("div",{className:"relative",style:{width:"fit-content"},children:[(0,w.jsx)(g.RB5,{className:"h-[1.5rem] w-[1.5rem] absolute box-border top-[50%] right-[2px] translate-y-[-50%]"}),(0,w.jsx)("input",{type:"search",placeholder:"Search",className:"px-2 pl-7 py-1 border border-[#999999] rounded-[5px]"})]})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:" w-[100%] max-h-[70vh] m-auto  bg-[#fff] shadow-md rounded-[10px] relative pb-[20px]  overflow-x-auto  overflow-y-scroll \tmd:w-[100%]",children:(0,w.jsxs)("table",(0,a.Z)((0,a.Z)({},L()),{},{className:"border-collapse w-[100%] m-auto rounded-[15px] whitespace-nowrap ",children:[(0,w.jsx)("thead",{className:" w-full px-32 sticky top-0",children:K.map((function(e,t){return(0,w.jsx)("tr",(0,a.Z)((0,a.Z)({},e.getHeaderGroupProps()),{},{className:"border-solid border-[1px] border-white even:bg-[#eef1f1] first:w-[20px]",children:e.headers.map((function(e,t){return(0,w.jsx)("th",(0,a.Z)((0,a.Z)({},e.getHeaderProps),{},{className:"border-solid pl-[30px] h-[50px] text-left bg-[#eef1f1]  first:rounded-tl-[10px] last:rounded-tr-[10px] border-b-[2px] border-[#c5c5c5] py-6   last:pl-[0px] w-[150px] last:w-[20px]  first:w-[20px]  ",children:e.render("Header")}),t)}))}),t)}))}),(0,w.jsx)("tbody",(0,a.Z)((0,a.Z)({},B()),{},{children:$.map((function(e){return J(e),(0,i.createElement)("tr",(0,a.Z)((0,a.Z)({},e.getRowProps()),{},{key:e.original.id,className:"even:bg-[#eef1f1] border-b border-gray-200 "}),e.cells.map((function(e){return(0,w.jsx)("td",(0,a.Z)((0,a.Z)({},e.getCellProps()),{},{className:"pl-[30px] text-left max-w-[150px] overflow-x-auto p-4 last:w-[2px] last:pl-[0px]",children:e.render("Cell")}))})))}))}))]}))})," "]}),(0,w.jsx)(E.Z,{id:"basic-menu",anchorEl:x,open:T,onClose:function(){m(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:(0,w.jsxs)(Z.Z,{onClick:function(t){!function(t){var r=O[P];y(r._id),e.restoretraine(r._id),m(null)}()},children:[(0,w.jsx)(h.Aac,{className:"mr-[5px]"}),"Restore"]})}),(0,w.jsx)("div",{className:"block mx-auto my-0 w-[100%]  bottom-0 overflow-x-auto",children:(0,w.jsxs)("div",{className:"w-[100%] flex items-center justify-center my-[30px]  mx-auto md:block md:mx-auto",children:[(0,w.jsxs)("span",{className:"flex items-center md:justify-center md:mt-[10px]",children:[" ",(0,w.jsx)("button",{className:"my-0 mx-[5px] px-[5px] py-0 text-[#333] h-[38px] border-solid border-[1px]  border-[#a8a8a8]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return W(0)},disabled:!G,children:(0,w.jsx)(g.xN8,{})}),(0,w.jsx)("button",{className:" border-solid border-[1px]  border-[#a8a8a8] py-0 px-[10px] text-[#333] rounded-l-[5px] h-[38px] disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8] ",onClick:function(){return q()},disabled:!G,children:(0,w.jsx)(g.CF5,{})}),(0,w.jsx)("span",{className:"flex flex-wrap md:hidden ",id:"pages",children:null===Q||void 0===Q?void 0:Q.map((function(e,t){return(0,w.jsx)("div",{children:(0,w.jsx)("button",{className:"border-solid border-[1px] mx-[2px]  border-[#a8a8a8] bg-[#fff] w-[35px] h-[38px]  active:bg-[#333] active:text-[#fff]-500 ".concat(X===t&&"bg-[#eef1f1]"),onClick:function(e){var t=e.target.innerText;W(t-1)},children:e+1})})}))}),(0,w.jsx)("button",{className:" border-solid border-[1px]  border-[#a8a8a8] py-0 px-[10px] text-[#333] rounded-r-[5px] h-[38px]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return U()},disabled:!z,children:(0,w.jsx)(g.Td4,{})}),(0,w.jsx)("button",{className:"my-0 mx-[5px] px-[5px] py-0 text-[#333] h-[38px] border-solid border-[1px]  border-[#a8a8a8]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return W(M-1)},disabled:!z,children:(0,w.jsx)(g.yci,{})})]})," ",(0,w.jsxs)("span",{className:"flex ml-3 md:justify-center  text-center md:mt-3 md:ml-0",children:["Page ",(0,w.jsxs)("strong",{children:[X+1," "]}),"of"," ",(0,w.jsx)("strong",{children:Q.length})]})]})})]})})})]})}))}}]);
//# sourceMappingURL=329.464ce293.chunk.js.map