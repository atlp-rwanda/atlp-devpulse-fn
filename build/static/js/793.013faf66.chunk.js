"use strict";(self.webpackChunkatlp_devpulse_fn=self.webpackChunkatlp_devpulse_fn||[]).push([[793],{4793:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var a=r(1413),n=r(2982),s=r(4165),l=r(5861),o=r(885),c=r(2791),i=r(1429),d=r(7339),u=r(1044),p=r(5985),x=r(1031),m=r(7059),f=r(8687),b=r(1358),h=r(9126),g=r(8820),v=r(9009),j=r(9546),y=r(1312),w=r(9889),N=r(3814),Z=r(6107),E=r(184),T=(0,f.$j)((function(e){return{allTrainees:e.softDeletedTrainees,restore:e.restore,clearTrashMessage:e.clearTrash}}),{getAllSoftDeletedTrainees:function(e){var t=e.page,r=e.itemsPerPage;return function(){var e=(0,l.Z)((0,s.Z)().mark((function e(a){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.ZP)({url:"http://localhost:4000/",method:"post",data:{query:"\n        query Query($input: pagination) {\n            allSoftDeletedTrainees(input: $input) {\n                lastName\n                firstName\n                _id\n                email\n            }\n        }\n      ",variables:{input:{page:t,itemsPerPage:r}}}}).then((function(e){if(null!==e.data.data)p.Am.success("Fetched all deleted trainees successfuly."),console.log(e.data.data.allSoftDeletedTrainees),a((0,i.Z)(d.RK,e.data.data.allSoftDeletedTrainees));else{var t=e.data.errors[0].message;p.Am.error(t),a((0,i.Z)(d.Tl,t))}})).catch((function(e){a((0,i.Z)(d.Tl,e))}));case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),!e.t0){e.next=9;break}return e.abrupt("return",console.log(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},restoretraine:function(e){return console.log(e),function(){var t=(0,l.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:m._.RESTORE_TRAINE_LOADING});try{x.Z.post("/",{query:"mutation SoftRecover($input: softRecover) {\n                            softRecover(input: $input) {\n                                    id\n                                    email\n                                 \n                                }\n                                }",variables:{input:{id:e}}},{headers:{"Content-Type":"application/json"}}).then((function(e){var t;(console.log(e),e.data.data&&r({type:m._.RESTORE_TRAINE_SUCCESS,message:e.data.data.softRecover.email}),p.Am.success("Trainee Restored successfuly."),e.data.errors)&&(e.data.errors.map((function(e){t=e.message})),p.Am.error(t),console.log(t),r({type:m._.RESTORE_TRAINE_FAIL,error:t}))})).catch((function(e){console.log(e),r({type:m._.RESTORE_TRAINE_FAIL,error:e.message})}))}catch(a){r({type:m._.RESTORE_TRAINE_FAIL,error:a.message})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},clearTrash:function(){return function(){var e=(0,l.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.ZP)({url:"http://localhost:4000/",method:"post",data:{query:"mutation EmptyRecyclebin {\n        emptyRecyclebin {\n          ... on NotFoundError {\n            message\n          }\n        }\n      }\n      "}}).then((function(e){null!==e.data.data?(p.Am.success("Trash cleared successfully."),t((0,i.Z)(d.px,e.data.data.emptyRecyclebin))):p.Am.error("Error while clearing trash")})).catch((function(e){console.log("Dispatch catch error",e)}));case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),!e.t0){e.next=9;break}return e.abrupt("return",console.log(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){console.log(e);var t=e.allTrainees,r=e.restore,i=e.clearTrashMessage,d=(0,c.useState)(1),u=(0,o.Z)(d,1)[0],p=(0,c.useState)(100),x=(0,o.Z)(p,1)[0],m=(0,c.useState)(null),f=(0,o.Z)(m,2),T=f[0],R=f[1],S=(0,c.useState)(""),k=(0,o.Z)(S,2),P=(k[0],k[1]),C=(0,c.useState)(""),_=(0,o.Z)(C,2),A=(_[0],_[1]),F=(0,c.useState)(""),I=(0,o.Z)(F,2),D=I[0],H=I[1],L=Boolean(T),O=(0,c.useState)(void 0),B=(0,o.Z)(O,2),$=B[0],q=B[1];(0,c.useEffect)((function(){var t={page:u,itemsPerPage:x};e.getAllSoftDeletedTrainees(t)}),[r,i]);var z=(0,c.useState)(""),M=(0,o.Z)(z,2),G=M[0],Q=(M[1],t.data);console.log(G);var K=[{Header:"First name",accessor:"firstName"},{Header:"Last name",accessor:"lastName"},{Header:"Email",accessor:"email"},{Header:"Actions",accessor:"",Cell:function(e){var t=e.row;return(0,E.jsx)("div",{children:(0,E.jsx)(h.FQA,{onClick:function(e){q(t.id),R(e.currentTarget)},style:{color:"#000",fontSize:"20px"}})})}}],U=(0,c.useMemo)((function(){return K}),[]),V=(0,b.useTable)({columns:U,data:Q},b.usePagination,b.useRowSelect,(function(e){e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return(0,E.jsx)(v.Z,(0,a.Z)({},t()))},Cell:function(e){var t=e.row;return(0,E.jsx)(v.Z,(0,a.Z)({},t.getToggleRowSelectedProps()))}}].concat((0,n.Z)(e))}))})),J=V.getTableProps,W=V.getTableBodyProps,X=V.headerGroups,Y=V.page,ee=V.nextPage,te=V.previousPage,re=V.canNextPage,ae=V.canPreviousPage,ne=V.pageOptions,se=V.gotoPage,le=V.pageCount,oe=(V.setPageSize,V.state),ce=V.prepareRow,ie=(V.rows,V.selectedFlatRows,oe.pageIndex),de=(oe.pageSize,function(){var t=(0,l.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clearTrash();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(w.Z,{}),(0,E.jsx)("div",{className:"flex bg-[#F9F9FB] min-h-[100vh]",children:(0,E.jsx)("div",{className:"min-h-[50vh] w-[100%] block  md:w-[100%] md:mt-0  pl-[16rem] pt-[80px] md:pl-0",children:(0,E.jsxs)("div",{className:" w-[100%] top-[20%] md:top-[10%] md:relative px-[10%] md:px-[10px]",children:[(0,E.jsxs)("div",{className:"flex justify-between align-center mb-5 relative md:block",children:[(0,E.jsx)("div",{className:"absolute bottom-0 right-0 md:relative md:mb-3",children:(0,E.jsx)("button",{onClick:de,className:"px-3 rounded-[5px] bg-[#173b3f] text-white flex items-center",children:"Empty trash"})}),(0,E.jsxs)("div",{children:[(0,E.jsx)("div",{className:"",children:(0,E.jsx)(N.ZP,{className:"test sm:text-sm border bg-cgray border-solid border-bdr w-40 rounded-bt-rd",options:[{value:"_id",label:"Trainee ID"},{value:"firstName",label:"First Name"},{value:"lastName",label:"Last Name"},{value:"email",label:"Email"},{value:"",label:"Select by"}],defaultValue:{value:"",label:"Select by"},onChange:function(e){return A("".concat(null===e||void 0===e?void 0:e.value))},theme:Z.v})}),(0,E.jsx)("div",{className:"flex items-center mb-6 semi-sm:flex-wrap",children:(0,E.jsxs)("div",{className:" searchInputs relative block",children:[(0,E.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2",children:(0,E.jsx)("svg",{className:"h-5 w-5 fill-slate-300 text-cg cursor-pointer",onClick:function(){H("")},viewBox:"-6 -6 20 20",children:""===D?(0,E.jsx)(g.RB5,{}):(0,E.jsx)(g.oHP,{})})}),(0,E.jsx)("input",{onChange:function(e){return H(e.target.value)},className:"block bg-row-gray w-50 border border-bdr rounded-bt-rd mt-2 py-2 pl-9 pr-4 focus:outline-none sm:text-sm",value:D,placeholder:"Search",type:"text",name:"search"})]})})]})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("div",{className:" w-[100%] max-h-[70vh] m-auto  bg-[#fff] shadow-md rounded-[10px] relative pb-[20px]  overflow-x-auto  overflow-y-scroll \tmd:w-[100%]",children:(0,E.jsxs)("table",(0,a.Z)((0,a.Z)({},J()),{},{className:"border-collapse w-[100%] m-auto rounded-[15px] whitespace-nowrap ",children:[(0,E.jsx)("thead",{className:" w-full px-32 sticky top-0",children:X.map((function(e,t){return(0,E.jsx)("tr",(0,a.Z)((0,a.Z)({},e.getHeaderGroupProps()),{},{className:"border-solid border-[1px] border-white even:bg-[#eef1f1] first:w-[20px]",children:e.headers.map((function(e,t){return(0,E.jsx)("th",(0,a.Z)((0,a.Z)({},e.getHeaderProps),{},{className:"border-solid pl-[30px] h-[50px] text-left bg-[#eef1f1]  first:rounded-tl-[10px] last:rounded-tr-[10px] border-b-[2px] border-[#c5c5c5] py-6   last:pl-[0px] w-[150px] last:w-[20px]  first:w-[20px]  ",children:e.render("Header")}),t)}))}),t)}))}),(0,E.jsx)("tbody",(0,a.Z)((0,a.Z)({},W()),{},{children:Y.map((function(e){return ce(e),(0,c.createElement)("tr",(0,a.Z)((0,a.Z)({},e.getRowProps()),{},{key:e.original.id,className:"even:bg-[#eef1f1] border-b border-gray-200 "}),e.cells.map((function(e){return(0,E.jsx)("td",(0,a.Z)((0,a.Z)({},e.getCellProps()),{},{className:"pl-[30px] text-left max-w-[150px] overflow-x-auto p-4 last:w-[2px] last:pl-[0px]",children:e.render("Cell")}))})))}))}))]}))})," "]}),(0,E.jsx)(j.Z,{id:"basic-menu",anchorEl:T,open:L,onClose:function(){R(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:(0,E.jsxs)(y.Z,{onClick:function(t){!function(t){var r=Q[$];P(r._id),e.restoretraine(r._id),R(null)}()},children:[(0,E.jsx)(h.zjw,{className:"mr-[5px]"}),"Restore"]})}),(0,E.jsx)("div",{className:"block mx-auto my-0 w-[100%]  bottom-0 overflow-x-auto",children:(0,E.jsxs)("div",{className:"w-[100%] flex items-center justify-center my-[30px]  mx-auto md:block md:mx-auto",children:[(0,E.jsxs)("span",{className:"flex items-center md:justify-center md:mt-[10px]",children:[" ",(0,E.jsx)("button",{className:"my-0 mx-[5px] px-[5px] py-0 text-[#333] h-[38px] border-solid border-[1px]  border-[#a8a8a8]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return se(0)},disabled:!ae,children:(0,E.jsx)(g.xN8,{})}),(0,E.jsx)("button",{className:" border-solid border-[1px]  border-[#a8a8a8] py-0 px-[10px] text-[#333] rounded-l-[5px] h-[38px] disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8] ",onClick:function(){return te()},disabled:!ae,children:(0,E.jsx)(g.CF5,{})}),(0,E.jsx)("span",{className:"flex flex-wrap md:hidden ",id:"pages",children:null===ne||void 0===ne?void 0:ne.map((function(e,t){return(0,E.jsx)("div",{children:(0,E.jsx)("button",{className:"border-solid border-[1px] mx-[2px]  border-[#a8a8a8] bg-[#fff] w-[35px] h-[38px]  active:bg-[#333] active:text-[#fff]-500 ".concat(ie===t&&"bg-[#eef1f1]"),onClick:function(e){var t=e.target.innerText;se(t-1)},children:e+1})})}))}),(0,E.jsx)("button",{className:" border-solid border-[1px]  border-[#a8a8a8] py-0 px-[10px] text-[#333] rounded-r-[5px] h-[38px]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return ee()},disabled:!re,children:(0,E.jsx)(g.Td4,{})}),(0,E.jsx)("button",{className:"my-0 mx-[5px] px-[5px] py-0 text-[#333] h-[38px] border-solid border-[1px]  border-[#a8a8a8]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return se(le-1)},disabled:!re,children:(0,E.jsx)(g.yci,{})})]})," ",(0,E.jsxs)("span",{className:"flex ml-3 md:justify-center  text-center md:mt-3 md:ml-0",children:["Page ",(0,E.jsxs)("strong",{children:[ie+1," "]}),"of"," ",(0,E.jsx)("strong",{children:ne.length})]})]})})]})})})]})}))}}]);
//# sourceMappingURL=793.013faf66.chunk.js.map