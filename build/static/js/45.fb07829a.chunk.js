"use strict";(self.webpackChunkatlp_devpulse_fn=self.webpackChunkatlp_devpulse_fn||[]).push([[45],{1045:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var n=a(1413),r=a(885),l=a(2791),s=a(4165),o=a(5861),c=a(1429),p=a(7339),d=a(1044),i=a(5985),u=a(8687),x=(a(4666),a(1358)),m=a(7462),f=a(3366),b=a(8182),h=a(2421),y=a(104),v=a(2982),g=a(2466),w=a(114),j=["sx"];function C(e){var t,a=e.sx,n=function(e){var t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(a){w.Gc[a]?t.systemProps[a]=e[a]:t.otherProps[a]=e[a]})),t}((0,f.Z)(e,j)),r=n.systemProps,l=n.otherProps;return t=Array.isArray(a)?[r].concat((0,v.Z)(a)):"function"===typeof a?function(){var e=a.apply(void 0,arguments);return(0,g.P)(e)?(0,m.Z)({},r,e):r}:(0,m.Z)({},r,a),(0,m.Z)({},l,{sx:t})}var Z=a(886),N=a(184),k=["className","component"];var A=a(5902),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,a=e.defaultClassName,n=void 0===a?"MuiBox-root":a,r=e.generateClassName,s=e.styleFunctionSx,o=void 0===s?y.Z:s,c=(0,h.ZP)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(o),p=l.forwardRef((function(e,a){var l=(0,Z.Z)(t),s=C(e),o=s.className,p=s.component,d=void 0===p?"div":p,i=(0,f.Z)(s,k);return(0,N.jsx)(c,(0,m.Z)({as:d,ref:a,className:(0,b.Z)(o,r?r(n):n),theme:l},i))}));return p}({defaultTheme:(0,a(4360).Z)(),defaultClassName:"MuiBox-root",generateClassName:A.Z.generate}),P=D,S=a(2026),E=a(9546),I=a(1312),B=a(9126),T=a(8820),$=a(71),F=a(9889),H=(0,u.$j)((function(e){var t=e.cycles;return{allCycles:t,errors:t.errors}}),{getAllCycles:function(){return function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var a,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.ZP)({url:"http://localhost:4000/",method:"post",data:{query:"\n        query getCycle {\n          getAllApplicationCycles {\n            id\n            name\n            startDate\n            endDate\n          }\n        }\n      "}});case 3:return a=e.sent,e.next=6,a.data.data.getAllApplicationCycles;case 6:n=e.sent,t((0,c.Z)(p.qz,n)),e.next=14;break;case 10:if(e.prev=10,e.t0=e.catch(0),!e.t0){e.next=14;break}return e.abrupt("return",console.log(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},createCycle:function(e){var t=e.name,a=e.startDate,n=e.endDate;return function(){var e=(0,o.Z)((0,s.Z)().mark((function e(r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.ZP)({url:"http://localhost:4000/",method:"post",data:{query:"\n        mutation createApplicationCycle($input: createApplicationCycle) {\n            createApplicationCycle(input: $input) {\n                id\n                name\n                startDate\n                endDate\n            }\n        }",variables:{input:{name:t,startDate:a,endDate:n}}}}).then((function(e){if(null!==e.data.data)i.Am.success("Cycle successfully created."),r((0,c.Z)(p.EX,e.data.data.createApplicationCycle));else{var t=e.data.errors[0].message;i.Am.error(t),r((0,c.Z)(p.ab,t))}})).catch((function(e){r((0,c.Z)(p.ab,e))}));case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",r((0,c.Z)(p.ab,e.t0)));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},updateApplicationCycle:function(e){var t=e.updateApplicationCycleId,a=e.name,n=e.startDate,r=e.endDate,l=e.id;return function(){var e=(0,o.Z)((0,s.Z)().mark((function e(o){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.ZP)({url:"http://localhost:4000/",method:"post",data:{query:"\n          mutation upDateCycle(\n            $updateApplicationCycleId: ID!\n            $input: updateApplicationCycle\n            ) {\n            updateApplicationCycle(id: $updateApplicationCycleId, input: $input) {\n                id\n                name\n                startDate\n                endDate\n                }\n            }",variables:{updateApplicationCycleId:t,input:{name:a,startDate:n,endDate:r,id:l}}}}).then((function(e){if(null!==e.data.data)i.Am.success("Cycle successfully updated."),o((0,c.Z)(p.$l,e.data.data.updateApplicationCycle));else{var t=e.data.errors[0].message;i.Am.error(t),o((0,c.Z)(p.bs,t))}})).catch((function(e){o((0,c.Z)(p.bs,e))}));case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),!e.t0){e.next=9;break}return e.abrupt("return",console.log(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},deleteApplicationCycle:function(e){var t=e.deleteApplicationCycleId;return function(){var e=(0,o.Z)((0,s.Z)().mark((function e(a){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.ZP)({url:"http://localhost:4000/",method:"post",data:{query:"\n            mutation deleteCycle($deleteApplicationCycleId: ID!) {\n            deleteApplicationCycle(id: $deleteApplicationCycleId) {\n                id\n                name\n             }\n            }",variables:{deleteApplicationCycleId:t}}}).then((function(e){if(null!==e.data.data&&(i.Am.success("Cycle successfully deleted."),a((0,c.Z)(p.fF,e.data.data.deleteApplicationCycle))),null==e.data.data){var t=e.data.errors[0].message;i.Am.success(t),a((0,c.Z)(p.wc,t))}})).catch((function(e){a((0,c.Z)(p.wc,e))}));case 3:e.sent,e.next=10;break;case 6:if(e.prev=6,e.t0=e.catch(0),!e.t0){e.next=10;break}return e.abrupt("return",console.log(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.allCycles,a=(e.errors,t.data);(0,l.useEffect)((function(){e.getAllCycles()}),[]);var s=(0,l.useState)(null),o=(0,r.Z)(s,2),c=o[0],p=o[1],d=Boolean(c),i=(0,l.useState)(""),u=(0,r.Z)(i,2),m=u[0],f=u[1],b=(0,l.useState)(""),h=(0,r.Z)(b,2),y=h[0],v=h[1],g=(0,l.useState)(""),w=(0,r.Z)(g,2),j=w[0],C=w[1],Z=(0,l.useState)(""),k=(0,r.Z)(Z,2),A=k[0],D=k[1],H=(0,l.useState)(""),q=(0,r.Z)(H,2),z=q[0],M=q[1],_=(0,l.useState)(""),G=(0,r.Z)(_,2),R=G[0],L=G[1],O=(0,l.useState)(""),Q=(0,r.Z)(O,2),K=Q[0],U=Q[1],X=(0,l.useState)(!1),J=(0,r.Z)(X,2),V=J[0],W=J[1],Y=(0,l.useState)(!1),ee=(0,r.Z)(Y,2),te=ee[0],ae=ee[1],ne=(0,l.useState)(!1),re=(0,r.Z)(ne,2),le=re[0],se=re[1],oe=(0,l.useState)(void 0),ce=(0,r.Z)(oe,2),pe=ce[0],de=ce[1],ie=(0,l.useState)(""),ue=(0,r.Z)(ie,2),xe=ue[0],me=ue[1],fe=function(e){e.preventDefault(),W(!1)},be=function(){ae(!1)},he=function(){se(!1)};(0,l.useEffect)((function(){e.getAllCycles()}),[]);var ye=[{Header:"Name",accessor:"name"},{Header:"Starting date",accessor:"startDate"},{Header:"Closing date",accessor:"endDate"},{Header:" ",accessor:"",Cell:function(e){var t=e.row;return(0,N.jsx)("div",{children:(0,N.jsx)(B.FQA,{onClick:function(e){de(t.id),p(e.currentTarget)},style:{color:"#000",fontSize:"20px"}})})}}],ve=(0,l.useMemo)((function(){return ye}),[]),ge=(0,x.useTable)({columns:ve,data:a},x.usePagination),we=ge.getTableProps,je=ge.getTableBodyProps,Ce=ge.headerGroups,Ze=ge.page,Ne=ge.nextPage,ke=ge.previousPage,Ae=ge.canNextPage,De=ge.canPreviousPage,Pe=ge.pageOptions,Se=ge.gotoPage,Ee=ge.pageCount,Ie=(ge.setPageSize,ge.state),Be=ge.prepareRow,Te=Ie.pageIndex;Ie.pageSize;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(F.Z,{}),(0,N.jsxs)("div",{className:"flex bg-[#F9F9FB]",children:[(0,N.jsx)("div",{className:"min-h-[50vh] w-[100%] block mt-10 md:w-[100%] md:mt-0 pl-[16rem]  pt-[80px] md:pl-0",children:(0,N.jsxs)("div",{className:" table table-fixed w-[100%] top-[20%] md:top-[10%] pb-10 md:relative px-[10%] md:px-[10px]",children:[(0,N.jsxs)("button",{className:"h-[40px] rounded-[5px] bg-[#173b3f] text-white flex items-center p-0 pl-[5px] pr-[10px] mb-[20px]",onClick:function(){ae(!0)},children:[(0,N.jsx)(B.B8K,{className:"mx-[5px]"}),(0,N.jsx)("span",{children:"Cycle"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:" w-[100%] max-h-[70vh] m-auto  bg-[#fff] shadow-md rounded-[10px] relative pb-[20px]  overflow-x-auto  overflow-y-scroll \tmd:w-[100%]",children:(0,N.jsxs)("table",(0,n.Z)((0,n.Z)({},we()),{},{className:"border-collapse w-[100%] m-auto rounded-[15px] whitespace-nowrap ",children:[(0,N.jsx)("thead",{className:" w-full px-32 sticky top-0",children:Ce.map((function(e,t){return(0,N.jsx)("tr",(0,n.Z)((0,n.Z)({},e.getHeaderGroupProps()),{},{className:"border-solid border-[1px] border-white even:bg-[#eef1f1] first:w-[20px]",children:e.headers.map((function(e,t){return(0,N.jsx)("th",(0,n.Z)((0,n.Z)({},e.getHeaderProps),{},{className:"border-solid pl-[30px] h-[50px] text-left bg-[#eef1f1]  first:rounded-tl-[10px] last:rounded-tr-[10px] border-b-[2px] border-[#c5c5c5] py-6   last:pl-[0px] w-[150px] last:w-[20px]  first:w-[20px]  ",children:e.render("Header")}),t)}))}),t)}))}),(0,N.jsx)("tbody",(0,n.Z)((0,n.Z)({},je()),{},{children:Ze.map((function(e){return Be(e),(0,l.createElement)("tr",(0,n.Z)((0,n.Z)({},e.getRowProps()),{},{key:e.original.id,className:"even:bg-[#eef1f1] border-b border-gray-200 "}),e.cells.map((function(e){return(0,N.jsx)("td",(0,n.Z)((0,n.Z)({},e.getCellProps()),{},{className:"pl-[30px] text-left max-w-[150px] overflow-x-auto p-4 last:w-[2px] last:pl-[0px]",children:e.render("Cell")}))})))}))}))]}))})," "]}),(0,N.jsx)("div",{className:"block mx-auto my-0 w-[100%]  bottom-0 overflow-x-auto",children:(0,N.jsxs)("div",{className:"w-[100%] flex items-center justify-center my-[30px]  mx-auto md:block md:mx-auto",children:[(0,N.jsxs)("span",{className:"flex items-center md:justify-center md:mt-[10px]",children:[" ",(0,N.jsx)("button",{className:"my-0 mx-[5px] px-[5px] py-0 text-[#333] h-[38px] border-solid border-[1px]  border-[#a8a8a8]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return Se(0)},disabled:!De,children:(0,N.jsx)(T.xN8,{})}),(0,N.jsx)("button",{className:" border-solid border-[1px]  border-[#a8a8a8] py-0 px-[10px] text-[#333] rounded-l-[5px] h-[38px] disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8] ",onClick:function(){return ke()},disabled:!De,children:(0,N.jsx)(T.CF5,{})}),(0,N.jsx)("span",{className:"flex flex-wrap md:hidden ",id:"pages",children:null===Pe||void 0===Pe?void 0:Pe.map((function(e,t){return(0,N.jsx)("div",{children:(0,N.jsx)("button",{className:"border-solid border-[1px] mx-[2px]  border-[#a8a8a8] bg-[#fff] w-[35px] h-[38px]  active:bg-[#333] active:text-[#fff]-500 ".concat(Te===t&&"bg-[#eef1f1]"),onClick:function(e){var t=e.target.innerText;Se(t-1)},children:e+1})})}))}),(0,N.jsx)("button",{className:" border-solid border-[1px]  border-[#a8a8a8] py-0 px-[10px] text-[#333] rounded-r-[5px] h-[38px]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return Ne()},disabled:!Ae,children:(0,N.jsx)(T.Td4,{})}),(0,N.jsx)("button",{className:"my-0 mx-[5px] px-[5px] py-0 text-[#333] h-[38px] border-solid border-[1px]  border-[#a8a8a8]  disabled:bg-[#E7E7E7] disabled:text-[#a8a8a8]",onClick:function(){return Se(Ee-1)},disabled:!Ae,children:(0,N.jsx)(T.yci,{})})]})," ",(0,N.jsxs)("span",{className:"flex ml-3 md:justify-center  text-center md:mt-3 md:ml-0",children:["Page ",(0,N.jsxs)("strong",{children:[Te+1," "]}),"of"," ",(0,N.jsx)("strong",{children:Pe.length})]})]})})]})}),(0,N.jsxs)(E.Z,{id:"basic-menu",anchorEl:c,open:d,onClose:function(){p(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,N.jsxs)(I.Z,{onClick:function(e){!function(e){var t=a[pe];W(!0),D(t.name),M(t.startDate),L(t.endDate),U(t.id),p(null)}()},children:[(0,N.jsx)(B.Aac,{className:"mr-[5px]"}),"Edit"]}),(0,N.jsxs)(I.Z,{onClick:function(e){me(a[pe].id),se(!0),p(null)},children:[(0,N.jsx)(B.AuQ,{className:"mr-[5px]"}),"Delete"]})]}),(0,N.jsx)(S.Z,{open:te,onClose:be,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,N.jsx)(P,{className:"absolute w-[50%] top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] md:w-[90%]",children:(0,N.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault();var a={name:m,startDate:y,endDate:j};e.createCycle(a),ae(!1),setTimeout((function(){window.location.reload()}),3e3)},className:" relative w-[100%] rounded-[5px] h-[455px] m-auto p-[10px] pt-[5px] bg-[#f0f0f0] ",children:[(0,N.jsx)("h1",{className:"text-center font-bold text-[24px] m-[20px]",children:"Add new cycle"}),(0,N.jsx)($.bjh,{className:"absolute top-[20px] right-[20px] text-[35px] cursor-pointer",onClick:be}),(0,N.jsx)("hr",{style:{marginBottom:"40px"}}),(0,N.jsx)("input",{type:"text",name:"name",placeholder:"Cycle name",value:m,onChange:function(e){f(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,N.jsx)("input",{type:"date",name:"start date",value:y,onChange:function(e){v(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,N.jsx)("input",{type:"date",name:"end date",value:j,onChange:function(e){C(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,N.jsx)("button",{type:"submit",className:"text-white border-[1px] border-[#a8a8a8] h-[40px] w-[100px] block rounded-[5px] my-[10px] mx-[auto] bg-[#173b3f]",children:"Save"})]})})}),(0,N.jsx)(S.Z,{open:le,onClose:he,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,N.jsx)(P,{className:"absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] rounded-[5px] bg-[#f0f0f0]",children:(0,N.jsxs)("div",{className:"block w-[300px] h-[200px] bg-[#f0f0f0] rounded-[5px]",children:[(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsx)(T.ELj,{className:"w-[40px] my-[20px] mx-auto text-[40px]"}),(0,N.jsx)("p",{className:"w-[60%] m-auto font-bold",children:"Are you sure you want to delete this cycle?"})]}),(0,N.jsxs)("div",{className:"flex flex-wrap my-[20px] mx-0",children:[(0,N.jsx)("button",{className:"block text-white bg-[#940000] my-[10px] mx-auto rounded-[5px] w-[100px] h-[40px]",onClick:function(t){t.preventDefault();var a={deleteApplicationCycleId:xe};e.deleteApplicationCycle(a),se(!1),setTimeout((function(){window.location.reload()}),3e3)},children:"Delete"}),(0,N.jsx)("button",{className:"h-[40px] w-[100px] block rounded-[5px] my-[10px] mx-auto bg-[#ABB8C3] text-[#fff]",onClick:he,children:"Cancel"})]})]})})}),(0,N.jsx)(S.Z,{open:V,onClose:fe,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,N.jsx)(P,{className:"absolute w-[50%] top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] md:w-[90%]",children:(0,N.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault();var a={updateApplicationCycleId:K,name:A,startDate:z,endDate:R,id:K};e.updateApplicationCycle(a),W(!1)},className:"relative rounded-[5px] w-[100%] h-[455px] m-auto p-[10px] pt-[5px] bg-[#f0f0f0] ",children:[(0,N.jsx)("h1",{className:"text-center font-bold text-[24px] m-[20px]",children:"Update cycle"}),(0,N.jsx)($.bjh,{style:{position:"absolute",top:"20px",right:"20px",fontSize:"35px",cursor:"pointer"},onClick:fe}),(0,N.jsx)("hr",{style:{marginBottom:"40px"}}),(0,N.jsx)("input",{type:"text",name:"name",placeholder:"Cycle name",value:A,onChange:function(e){D(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,N.jsx)("input",{type:"date",name:"start date",value:z,onChange:function(e){M(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,N.jsx)("input",{type:"date",name:"end date",value:R,onChange:function(e){L(e.target.value)},className:" mt-3 bg-lime cursor-pointer text-[18px] self-center py-1 rounded-[5px] h-[50px] my-[20px] mx-auto w-[80%] block border-[2px] border-[#a8a8a8]  px-[10px] md:w-[90%]"}),(0,N.jsx)("div",{className:"flex flex-wrap w-[300px] m-auto",children:(0,N.jsx)("button",{className:"text-white border-[1px] border-[#a8a8a8] h-[40px] w-[100px] block rounded-[5px] my-[10px] mx-[auto] bg-[#173b3f]",type:"submit",children:"Save"})})]})})})]})]})}))}}]);
//# sourceMappingURL=45.fb07829a.chunk.js.map